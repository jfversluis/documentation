---
title: Getting Started
---
import LibBuilder from '../../../../components/Boilerplate/LibBuilder';

## Getting Started 

As developers, we often take internet connectivity and speed for granted.  Mobile phones are taking HUGE sized photos these days that can take quite some time to upload.

## Features

* Background Uploads & Downloads on each platform
* Supports transfer filtering based on metered connections (iOS & UWP only at the moment)
* Event Based Metrics
  * Percentage Complete
  * Total Bytes Expected
  * Total Bytes Transferred
  * Transfer Speed (Bytes Per Second)
  * Estimated Completion Time

## Setup

<LibBuilder componentName="httptransfers" client:load />


## Background Delegate

```csharp
using System;
using System.Threading.Tasks;
using Shiny;

namespace YourNamespace;


public partial class MyHttpTransferDelegate : IHttpTransferDelegate
{

    public async Task OnError(HttpTransferRequest request, Exception ex) 
    {
    }

    public async Task OnCompleted(HttpTransferRequest request)
    {
    }
}

// in multitargeted solutions on Android, you can completely customize the foreground service notification
#if ANDROID
public partial class TestHttpTransferDelegate : IAndroidHttpTransferDelegate
{
    public void ConfigureNotification(AndroidX.Core.App.NotificationCompat.Builder builder, HttpTransfer transfer)
    {
            builder
                .SetContentTitle("MyApp")
                .SetContentText("My App is sending images")
                .SetSmallIcon(Resource.Mipmap.youricon);
    }
}

#endif


```


## Managing Transfers

```csharp
IHttpTransferManager manager; // injected, resolved, etc

await manager.Queue(new HttpTransferRequest(
    "http://yourserver.com/upload", "somefile.txt"
));


```
public record AppleHttpTransferRequest(
    string Identifier,
    string Uri,
    bool IsUpload,
    string LocalFilePath,
    bool UseMeteredConnection = true,
    TransferHttpContent? BodyContent = null,
    IDictionary<string, string>? Headers = null,
    bool AllowsConstrainedNetworkAccess = true,
    bool AllowsCellularAccess = true,
    bool? AssumesHttp3Capable = null
    //native.NetworkServiceType = NSUrlRequestNetworkServiceType.Background
    //native.RequiresDnsSecValidation
    //native.TimeoutInterval

)
: HttpTransferRequest(
    Identifier,
    Uri,
    IsUpload,
    LocalFilePath,
    UseMeteredConnection,
    BodyContent,
    Headers
);
    {/* Task<IList<HttpTransfer>> GetTransfers();
    Task<HttpTransfer> Queue(HttpTransferRequest request);
    Task Cancel(string identifier);
    Task CancelAll();

    IObservable<int> WatchCount();
    IObservable<HttpTransferResult> WhenUpdateReceived(); */}

## Foreground

### Watching All Transfers (Progress)
TODO

### Watching a Specific Transfer
TODO

### Managed List

The managed list is meant manage a list of transfers

* The list is managed in a thread safe manner
* As new transfers are added, the list is updated